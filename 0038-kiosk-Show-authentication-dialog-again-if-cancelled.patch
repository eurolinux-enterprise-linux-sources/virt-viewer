From 6819216091347a7c37e87474d0ee99b306d0d3e7 Mon Sep 17 00:00:00 2001
From: "Eduardo Lima (Etrunko)" <etrunko@redhat.com>
Date: Fri, 19 May 2017 17:12:19 -0300
Subject: [PATCH virt-viewer 38/38] kiosk: Show authentication dialog again if
 cancelled

Related: https://bugzilla.redhat.com/show_bug.cgi?id=1446161

Signed-off-by: Eduardo Lima (Etrunko) <etrunko@redhat.com>
---
 src/virt-viewer-app.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/src/virt-viewer-app.c b/src/virt-viewer-app.c
index 2b74a9f..e90afe8 100644
--- a/src/virt-viewer-app.c
+++ b/src/virt-viewer-app.c
@@ -1441,6 +1441,8 @@ virt_viewer_app_disconnected(VirtViewerSession *session G_GNUC_UNUSED, const gch
 
     if (!priv->kiosk)
         virt_viewer_app_hide_all_windows(self);
+    else if (priv->cancelled)
+        priv->authretry = TRUE;
 
     if (priv->quitting)
         g_application_quit(G_APPLICATION(self));
-- 
2.9.4

