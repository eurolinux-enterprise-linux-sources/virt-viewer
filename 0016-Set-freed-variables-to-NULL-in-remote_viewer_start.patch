From 41cad1dace23e5b802d7ecc81a1f31bbba31af45 Mon Sep 17 00:00:00 2001
From: Jonathon Jongsma <jjongsma@redhat.com>
Date: Tue, 3 Jun 2014 11:13:14 -0500
Subject: [PATCH] Set freed variables to NULL in remote_viewer_start()

Coverity warns that 'type' can sometimes be used or free after already having
been freed.  This can happen when open_recent_dialog is true and we jump back up
to the retry_dialog label.  To prevent this, make sure the freed variables are
set to NULL after freeing.
---
 src/remote-viewer.c | 2 ++
 1 file changed, 2 insertions(+)

diff --git a/src/remote-viewer.c b/src/remote-viewer.c
index 556a84f..af2838e 100644
--- a/src/remote-viewer.c
+++ b/src/remote-viewer.c
@@ -1046,7 +1046,9 @@ cleanup:
     g_clear_object(&file);
     g_clear_object(&vvfile);
     g_free(guri);
+    guri = NULL;
     g_free(type);
+    type = NULL;
 
     if (!ret && priv->open_recent_dialog) {
         goto retry_dialog;
