From a1bb40e3c296b2f858243be4d7eaa3ceea46e67e Mon Sep 17 00:00:00 2001
From: Pavel Grunt <pgrunt@redhat.com>
Date: Sun, 14 Feb 2016 19:01:14 +0100
Subject: [PATCH] app: Return early on empty monitor mapping

Resolves:
https://bugzilla.redhat.com/show_bug.cgi?id=1304648
(cherry picked from commit fcb200e3d4452ebf53d2205603ac18305104806b)
---
 src/virt-viewer-app.c | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/src/virt-viewer-app.c b/src/virt-viewer-app.c
index 62608c8..4fef684 100644
--- a/src/virt-viewer-app.c
+++ b/src/virt-viewer-app.c
@@ -380,6 +380,11 @@ virt_viewer_app_parse_monitor_mappings(gchar **mappings, gsize nmappings)
     int i = 0;
     gchar **tokens = NULL;
 
+    if (nmappings == 0) {
+        g_warning("Empty monitor-mapping configuration");
+        goto configerror;
+    }
+
     for (i = 0; i < nmappings; i++) {
         gchar *endptr = NULL;
         gint display = 0, monitor = 0;
